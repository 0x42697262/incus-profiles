config:
  boot.autostart: false
  cloud-init.vendor-data: |
    #cloud-config
    users:
      - name: chicken
        groups: wheel
        sudo: ['ALL=(ALL) NOPASSWD:ALL']
    runcmd:
    - echo 'export WAYLAND_DISPLAY=wayland-1' >> /home/chicken/.bashrc
    - echo 'export XDG_SESSION_TYPE=wayland' >> /home/chicken/.bashrc
    - echo 'export QT_QPA_PLATFORM=wayland' >> /home/chicken/.bashrc
    - echo 'export XDG_RUNTIME_DIR=/mnt/.sockets/' >> /home/chicken/.bashrc
    package_update: true
    package_upgrade: true
    package_reboot_if_required: true
    packages:
      - firefox
      - git
      - neovim
      - vim
          
description: Configures Wayland
devices:
  graphics:
    gid: "1000"
    type: gpu
    uid: "1000"
  wayland:
    path: /mnt/.sockets/wayland-1
    shift: true
    source: /run/user/1000/wayland-1
    type: disk

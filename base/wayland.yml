config:
  cloud-init.vendor-data: |
    #cloud-config
    runcmd:
    - mkdir -p /run/user/1000
    - chown chicken:chicken /run/user/1000
    - ln -sf /mnt/.sockets/wayland-1 /run/user/1000/wayland-1
    - echo 'export WAYLAND_DISPLAY=wayland-1' >> /etc/profile
    - echo 'export XDG_SESSION_TYPE=wayland' >> /etc/profile
    - echo 'export QT_QPA_PLATFORM=wayland' >> /etc/profile
    - echo 'export XDG_RUNTIME_DIR=/run/user/1000/' >> /etc/profile
          
description: Configures Wayland
devices:
  graphics:
    gid: "1000"
    type: gpu
    uid: "1000"
  wayland:
    path: /mnt/.sockets/wayland-1
    shift: true
    source: /run/user/1000/wayland-1
    type: disk
